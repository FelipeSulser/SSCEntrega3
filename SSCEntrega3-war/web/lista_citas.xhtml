<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html" xmlns:c="http://java.sun.com/jsp/jstl/core"
     xmlns:p="http://primefaces.org/ui"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://java.sun.com/jsf/core">
      
 
    <h:body>
        <ui:composition template="WEB-INF/templates/plantilla.xhtml">
 
            <ui:define name ="content">
                <c:if test="#{ctrLogin.isLoggedIn() == false}">
                <script>
                    window.location = "login.xhtml";
                </script>
                </c:if>
                <h:outputStylesheet library="css" name="tabla_expediente.css"  />
                <h:outputStylesheet name="./css/default.css"/>
                <h:outputStylesheet name="./css/cssLayout.css"/>
                <h:outputStylesheet  name="./css/bootstrap.min.css"/>
                    
               
                
                <p:scrollPanel id="scrollPanelListaCitas">
                    <h2> <h:outputText id="head" value ="Citas:  " style="padding-left: 10px"/></h2>
                <h:form id="formulario" rendered="#{ctrLogin.isIsAdmin() == true}">
   
                 
                    <p:dataTable id="dataTable" style="width:1000px; padding: 10px;" var="cita" scrollable = "true" value="#{ctrListaCita.citas}">
                    <p:column id="id1" headerText="Id">
                        <h:outputText id="id2" value="#{cita.id}" />
                    </p:column>

                    <p:column id="fecha1" headerText="Fecha">
                        <h:outputText id="fecha2" value="#{cita.fecha}" />
                    </p:column>

                    <p:column id="tipo1" headerText="Tipo de cita">
                        <h:outputText id="tipo2" value="#{cita.tipo_de_cita}" />
                    </p:column>
                        
                    <p:column id="estado1" headerText="Estado de la cita">
                        <h:outputText id="estado2" value="#{cita.estado.toString()}" />
                    </p:column>
                        
                     <p:column id="profesional1" headerText="Profesional Encargado">
                         <h:outputText id="profesional2" value="#{cita.profesional.nombre} #{cita.profesional.apellido1} #{cita.profesional.apellido2}" />
                    </p:column>
                          <p:column id="ciudadano1" headerText="Ciudadano">
                              <h:outputText id="ciudadano2" value="#{cita.ciudadano.nombre} #{cita.ciudadano.apellido1} #{cita.ciudadano.apellido2}" />
                    </p:column>
                    <p:column id="verCita" headerText="Ver cita">
                       <!--<h:commandButton id="btn-ver-cita" value="Ver cita" 
                                        class="btn btn-info" action="#{controladorCita.browsePage(cita.id)}"/>-->
                       <h:link id = "linkToCita" class="btn btn-info" value="Ver cita" outcome="info_cita.xhtml" >
                           <f:param name="cita_id" value="#{cita.id}"/>
                       </h:link>

                    </p:column>   
                   <p:column id="eliminar" headerText="Eliminar">
                       <h:commandButton id="btn-eliminar" value="Eliminar" 
                                        class="btn btn-info" action="#{ctrListaCita.eliminar(cita.id)}"/>

                    </p:column>
                </p:dataTable>
                 
             </h:form>
                 
                
                
               </p:scrollPanel>  
            </ui:define>
 
        </ui:composition>
    </h:body>
</html>
